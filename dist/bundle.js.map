{"version":3,"file":"bundle.js","mappings":"mBAEA,MAAM,EAAOA,SAASC,eAAe,QACrC,EAAKC,iBAAiB,UAGtBC,eAA0BC,GACzBA,EAAEC,iBACF,IAAIC,EAOL,SAAsBC,GACrB,IAAID,EAAQ,EACRE,EAAUR,SAASS,iBAAiB,SAExC,IAAK,IAAIC,EAAM,EAAGA,EAAMF,EAAQG,OAAQD,IAAO,CAC9C,MAAME,EAAQJ,EAAQE,GACtBG,EAAgBD,GAEZA,EAAME,UAAUC,SAAS,UACxBC,EAAgBJ,KACnBK,EAAaL,GACbN,KAGmB,KAAhBM,EAAMM,QACTD,EAAaL,GACbN,IAGH,CACG,OAAOA,CACX,CA5Baa,GACRC,EAAW,IAAIC,SAAS,GACZ,IAAVf,SAsDPH,eAAwBmB,EAAKC,GAC5B,IACC,MAAMC,QAAiBC,MAAMH,EAAK,CACjCI,OAAQ,OACRC,QAAS,CACR,eAAgB,oBAEjBC,KAAMC,KAAKC,UAAUP,KAEtB,IAAIQ,QAAeP,EAASQ,OACN,YAAlBD,EAAOE,QC1Eb,WAKI,SAASC,IACLC,MAAMC,MAAMC,QAAQ,MACxB,CANAF,MAAMC,MAAMC,QAAU,QACNrC,SAASsC,cAAc,cAC9BpC,iBAAiB,QAASgC,GACnCK,OAAOrC,iBAAiB,SAIxB,SAAsBE,GACdA,EAAEoC,SAAWL,OACfD,GAEN,GACJ,CD8DGO,GACA,EAAKC,SACwB,UAAlBX,EAAOE,QACTU,MAAMZ,EAAOa,QAMxB,CAAE,MAAOtC,GACRuC,QAAQvC,MAAM,oBAAqBA,EACpC,CACD,CA5EcwC,CAASxB,EAAKF,EAG5B,IAVA,IAAIE,EAAM,yCAkCV,SAASL,EAAaL,GACrBA,EAAMmC,cAAcjC,UAAUkC,IAAI,UAClCpC,EAAME,UAAUkC,IAAI,UAEjB,IAAIC,EAAYrC,EAAMmC,cAAcT,cAAc,eAC9CW,IACAA,EAAYjD,SAASkD,cAAc,QACnCD,EAAUnC,UAAUkC,IAAI,cACxBpC,EAAMmC,cAAcI,YAAYF,IAGpCA,EAAUG,YAAc,2BAC5B,CACA,SAASvC,EAAgBD,GACxBA,EAAMmC,cAAcjC,UAAUuC,OAAO,UACrCzC,EAAME,UAAUuC,OAAO,UACvB,IAAIJ,EAAYrC,EAAMmC,cAAcT,cAAc,eAC/CW,GACFA,EAAUI,QAEZ,CAEA,SAASrC,EAAgBJ,GACxB,OAAQ,gDAAgD0C,KAAK1C,EAAMM,MACpE,C","sources":["webpack://feedbackform/./src/js/script.js","webpack://feedbackform/./src/js/modal.js"],"sourcesContent":["import { showModal } from \"./modal\";\r\n\r\nconst form = document.getElementById('form');\r\nform.addEventListener('submit', formSubmit);\r\nlet url = 'http://localhost:9090/api/registration';\r\n\r\nasync function formSubmit(e) {\r\n\te.preventDefault();\r\n\tlet error = formValidate(form);\r\n\tlet formData = new FormData(form);\r\n    if(error === 0){\r\n        await postData(url, formData);\r\n    }\r\n\t\r\n}\r\nfunction formValidate(form) {\r\n\tlet error = 0;\r\n\tlet formReq = document.querySelectorAll('._req');\r\n\r\n\tfor (let ind = 0; ind < formReq.length; ind++) {\r\n\t\tconst input = formReq[ind];\r\n\t\tformDeleteError(input);\r\n\r\n\t\tif (input.classList.contains('_email')) {\r\n\t\t\tif (validationEmail(input)) {\r\n\t\t\t\tformAddError(input);\r\n\t\t\t\terror++;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (input.value === '') {\r\n\t\t\t\tformAddError(input);\r\n\t\t\t\terror++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    return error\r\n}\r\n\r\nfunction formAddError(input) {\r\n\tinput.parentElement.classList.add('_error');\r\n\tinput.classList.add('_error');\r\n\r\n    let errorText = input.parentElement.querySelector('.error_text');\r\n    if(!errorText) {\r\n        errorText = document.createElement('span');\r\n        errorText.classList.add('error_text');\r\n        input.parentElement.appendChild(errorText);\r\n    }\r\n\r\n    errorText.textContent = `Заполните поле корректно!` \r\n}\r\nfunction formDeleteError(input) {\r\n\tinput.parentElement.classList.remove('_error');\r\n\tinput.classList.remove('_error');\r\n\tlet errorText = input.parentElement.querySelector('.error_text');\r\n\tif(errorText){\r\n\t\terrorText.remove()\r\n\t}\r\n}\r\n\r\nfunction validationEmail(input) {\r\n\treturn !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\r\n}\r\n\r\nasync function postData(url, data) {\r\n\ttry {\r\n\t\tconst response = await fetch(url, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(data),\r\n\t\t});\r\n\t\tlet result = await response.json();\r\n\t\tif (result.status === 'success') {\r\n\t\t\tshowModal();\r\n\t\t\tform.reset();\r\n\t\t} else if  (result.status === 'error'){\r\n            alert(result.message)\r\n\t\t\t// const errorFields = result.fields;\r\n\t\t\t// for (const field in errorFields) {\r\n\t\t\t// \terrorMessage = errorFields[field];\r\n            // alert(`Проверьте введенные данные: ${errorMessage} в поле ${field}`)};\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error('Произошла ошибка:', error);\r\n\t}\r\n}\r\n\r\n","function showModal(){\r\n    modal.style.display = 'block';\r\n    const closeBtn= document.querySelector('.btn__next')\r\n    closeBtn.addEventListener('click', closeModal)\r\n    window.addEventListener('click', outsideClick);\r\n    function closeModal(){\r\n        modal.style.display='none';\r\n    }\r\n    function outsideClick(e) {\r\n        if (e.target === modal) {\r\n          closeModal();\r\n        }\r\n    }\r\n}\r\n\r\nexport {showModal}"],"names":["document","getElementById","addEventListener","async","e","preventDefault","error","form","formReq","querySelectorAll","ind","length","input","formDeleteError","classList","contains","validationEmail","formAddError","value","formValidate","formData","FormData","url","data","response","fetch","method","headers","body","JSON","stringify","result","json","status","closeModal","modal","style","display","querySelector","window","target","showModal","reset","alert","message","console","postData","parentElement","add","errorText","createElement","appendChild","textContent","remove","test"],"sourceRoot":""}